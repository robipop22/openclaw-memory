{"version":3,"sources":["/Users/robertpop/work/personal/openclaw-memory/dist/index.cjs","../src/core/types.ts"],"names":[],"mappings":"AAAA;AACE;AACA;AACF,wDAA6B;AAC7B;AACE;AACF,wDAA6B;AAC7B,gCAA6B;AAC7B;AACE;AACA;AACA;AACF,wDAA6B;AAC7B;AACA;AC4PO,IAAM,kBAAA,EAAoD;AAAA,EAC/D,IAAA,EAAM;AAAA,IACJ,MAAA,EAAQ,IAAA;AAAA,IACR,MAAA,EAAQ,KAAA;AAAA,IACR,GAAA,EAAK,KAAA;AAAA,IACL,UAAA,EAAY,KAAA;AAAA,IACZ,UAAA,EAAY;AAAA,EACd,CAAA;AAAA,EACA,QAAA,EAAU;AAAA,IACR,MAAA,EAAQ,IAAA;AAAA,IACR,MAAA,EAAQ,IAAA;AAAA,IACR,GAAA,EAAK,KAAA;AAAA,IACL,UAAA,EAAY,IAAA;AAAA,IACZ,UAAA,EAAY;AAAA,EACd,CAAA;AAAA,EACA,IAAA,EAAM;AAAA,IACJ,MAAA,EAAQ,IAAA;AAAA,IACR,MAAA,EAAQ,IAAA;AAAA,IACR,GAAA,EAAK,IAAA;AAAA,IACL,UAAA,EAAY,IAAA;AAAA,IACZ,UAAA,EAAY;AAAA,EACd;AACF,CAAA;AD1PA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACF,kXAAC","file":"/Users/robertpop/work/personal/openclaw-memory/dist/index.cjs","sourcesContent":[null,"// ── Core Types ──────────────────────────────────────────────────────────\n\nexport type MemoryScope = \"user\" | \"agent\" | \"global\" | \"project\" | \"session\";\nexport type MemorySource = \"explicit\" | \"derived\" | \"observation\" | \"conversation_summary\" | \"entity_extraction\" | \"daily_digest\" | \"migration\";\nexport type EntityType = \"Person\" | \"Project\" | \"Organization\" | \"Decision\" | \"Preference\" | \"Event\" | \"Tool\" | \"Location\" | \"Concept\";\nexport type RelationshipType =\n  | \"WORKS_ON\"\n  | \"DECIDED\"\n  | \"PREFERS\"\n  | \"KNOWS\"\n  | \"USES\"\n  | \"LOCATED_AT\"\n  | \"BELONGS_TO\"\n  | \"MENTIONED_IN\"\n  | \"RELATED_TO\"\n  | \"CREATED_BY\"\n  | \"DEPENDS_ON\";\n\nexport type Tier = \"lite\" | \"standard\" | \"full\";\n\n// ── Data Models ─────────────────────────────────────────────────────────\n\nexport interface ExtractedEntity {\n  name: string;\n  type: EntityType;\n  properties: Record<string, string>;\n}\n\nexport interface ExtractedRelationship {\n  from_entity: string;\n  to_entity: string;\n  relationship: RelationshipType;\n  properties: Record<string, string>;\n}\n\nexport interface ExtractionResult {\n  entities: ExtractedEntity[];\n  relationships: ExtractedRelationship[];\n}\n\nexport interface Memory {\n  id: string;\n  agent_id: string;\n  scope: MemoryScope;\n  subject_id: string | null;\n  content: string;\n  tags: string[];\n  entities: ExtractedEntity[];\n  source: MemorySource;\n  created_by: string | null;\n  created_at: string;\n  updated_at: string;\n  expires_at: string | null;\n  embedding_hash: string | null;\n}\n\n// ── API Request/Response Types (snake_case for HTTP API) ────────────────\n\nexport interface CreateMemoryRequest {\n  agent_id: string;\n  scope: MemoryScope;\n  subject_id?: string | null;\n  content: string;\n  tags?: string[];\n  source?: MemorySource;\n  created_by?: string | null;\n  extract_entities?: boolean;\n  expires_at?: string | null;\n}\n\nexport interface UpdateMemoryRequest {\n  content?: string;\n  tags?: string[];\n  scope?: MemoryScope;\n  subject_id?: string | null;\n  expires_at?: string | null;\n  extract_entities?: boolean;\n}\n\nexport interface SearchRequest {\n  agent_id?: string;\n  query: string;\n  scopes?: MemoryScope[];\n  subject_id?: string | null;\n  limit?: number;\n  include_graph?: boolean;\n  cross_agent?: boolean;\n  strategy?: \"auto\" | \"semantic\" | \"fulltext\" | \"graph\" | \"all\";\n}\n\nexport interface ScoredMemory {\n  memory: Memory;\n  score: number;\n  source_layer: \"sqlite\" | \"qdrant\" | \"age\";\n  graph_context?: {\n    related_entities: Array<{\n      type: EntityType;\n      name: string;\n      relationship: string;\n    }>;\n  };\n}\n\nexport interface SearchResponse {\n  results: ScoredMemory[];\n  strategy_used: string;\n  layer_stats: {\n    sqlite: { count: number; ms: number };\n    qdrant: { count: number; ms: number };\n    age: { count: number; ms: number };\n  };\n}\n\nexport interface SyncStatus {\n  sqlite: \"ok\";\n  qdrant: \"ok\" | \"queued\" | \"failed\" | \"disabled\";\n  age: \"ok\" | \"queued\" | \"failed\" | \"disabled\";\n}\n\nexport interface CreateMemoryResponse {\n  id: string;\n  agent_id: string;\n  scope: MemoryScope;\n  content: string;\n  tags?: string[];\n  entities: ExtractedEntity[];\n  created_at: string;\n  updated_at?: string;\n  sync_status: SyncStatus;\n}\n\nexport interface ConversationLogEntry {\n  agent_id: string;\n  session_id: string;\n  user_id: string;\n  channel: string;\n  role: string;\n  content: string;\n  timestamp: string;\n}\n\nexport interface SummarizeRequest {\n  agent_id: string;\n  session_id: string;\n  user_id: string;\n  channel: string;\n  messages: Array<{\n    role: \"user\" | \"assistant\" | \"system\";\n    content: string;\n    timestamp: string;\n  }>;\n  reason?: string;\n}\n\nexport interface SummarizeResponse {\n  memory_id: string;\n  summary: string;\n  entities_extracted: ExtractedEntity[];\n  relationships_created: number;\n}\n\nexport interface HealthResponse {\n  sqlite: \"ok\" | \"error\" | \"disabled\";\n  qdrant: \"ok\" | \"error\" | \"disabled\";\n  age: \"ok\" | \"error\" | \"disabled\";\n  tier: Tier;\n  uptime: number;\n  details?: Record<string, string>;\n}\n\nexport interface SyncQueueItem {\n  id: number;\n  memory_id: string;\n  layer: \"qdrant\" | \"age\";\n  operation: \"upsert\" | \"delete\";\n  attempts: number;\n  last_error: string | null;\n  created_at: string;\n}\n\nexport interface ListMemoriesQuery {\n  agent_id?: string;\n  scope?: MemoryScope;\n  subject_id?: string;\n  source?: MemorySource;\n  tags?: string;\n  limit?: number;\n  offset?: number;\n  order?: \"asc\" | \"desc\";\n}\n\nexport interface MigrateMarkdownRequest {\n  markdown_paths: string[];\n  agent_id: string;\n  dry_run?: boolean;\n}\n\n// ── Programmatic API Types (camelCase) ──────────────────────────────────\n\nexport interface StoreParams {\n  agentId: string;\n  scope: MemoryScope;\n  subjectId?: string | null;\n  content: string;\n  tags?: string[];\n  source?: MemorySource;\n  createdBy?: string | null;\n  extractEntities?: boolean;\n  expiresAt?: string | null;\n}\n\nexport interface StoreResult {\n  id: string;\n  agentId: string;\n  scope: MemoryScope;\n  content: string;\n  entities: ExtractedEntity[];\n  createdAt: string;\n  syncStatus: {\n    sqlite: \"ok\";\n    qdrant: \"ok\" | \"queued\" | \"failed\" | \"disabled\";\n    age: \"ok\" | \"queued\" | \"failed\" | \"disabled\";\n  };\n}\n\nexport interface SearchParams {\n  agentId: string;\n  query: string;\n  scopes?: MemoryScope[];\n  subjectId?: string | null;\n  limit?: number;\n  includeGraph?: boolean;\n  crossAgent?: boolean;\n  strategy?: \"auto\" | \"semantic\" | \"fulltext\" | \"graph\" | \"all\";\n}\n\nexport interface UpdateParams {\n  content?: string;\n  tags?: string[];\n  scope?: MemoryScope;\n  subjectId?: string | null;\n  expiresAt?: string | null;\n  extractEntities?: boolean;\n}\n\nexport interface ListParams {\n  agentId?: string;\n  scope?: MemoryScope;\n  subjectId?: string;\n  source?: MemorySource;\n  tags?: string;\n  limit?: number;\n  offset?: number;\n  order?: \"asc\" | \"desc\";\n}\n\n// ── Tier Capabilities ───────────────────────────────────────────────────\n\nexport interface TierCapabilities {\n  sqlite: true;\n  qdrant: boolean;\n  age: boolean;\n  embeddings: boolean;\n  extraction: boolean;\n}\n\nexport const TIER_CAPABILITIES: Record<Tier, TierCapabilities> = {\n  lite: {\n    sqlite: true,\n    qdrant: false,\n    age: false,\n    embeddings: false,\n    extraction: false,\n  },\n  standard: {\n    sqlite: true,\n    qdrant: true,\n    age: false,\n    embeddings: true,\n    extraction: true,\n  },\n  full: {\n    sqlite: true,\n    qdrant: true,\n    age: true,\n    embeddings: true,\n    extraction: true,\n  },\n};\n"]}